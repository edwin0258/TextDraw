"use strict";function _toConsumableArray(a){if(Array.isArray(a)){for(var b=0,d=Array(a.length);b<a.length;b++)d[b]=a[b];return d}return Array.from(a)}var TextDraw={init:function init(){function b(q,r){var s=f[r-1][q-1];return{text:/(style=')(.*)('>)(.*)(<\/span>)/g.exec(s)[4],styling:/(style=')(.*)(')/g.exec(s)[2]}}function d(){var q=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,s=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,t=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1;if(s-=1,t-=1,q<=g&&r<=k&&0<q&&0<r){if(q+s<=g&&r+t<=k&&0<=s&&0<=t)return!0;throw Error("Positioning in canvas invalid. Width: "+(s+1)+" Height: "+(t+1)+" goes outside canvas.")}else throw Error("Positioning in canvas invalid. Row: "+r+" Column: "+q+" not found")}function e(q){var r=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"color:black;";//package characters for placing on canvas.
return"<span style='"+r+"'>"+q+"</span>"}//Drawing types
var f=[],g=0,k=0,n={character:"@",char_count:4,//length of line
styling:"color:black;",//styling of line
random_char:!1,//if there is an array of characters choose at random.
random_color:!1,x_pos:0,y_pos:0,draw:function draw(){var r=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"@",s=1<arguments.length&&arguments[1]!==void 0?arguments[1]:4,t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:1,u=3<arguments.length&&arguments[3]!==void 0?arguments[3]:1,v=4<arguments.length&&arguments[4]!==void 0?arguments[4]:{vertical:!1,styling:"color:black;"};//DRAW - character, length, y_position, x_position
(function(){v.vertical=v.vertical||!1,this.styling=v.styling||"color:black;",this.character=r,this.char_count=s,this.x_pos=t-1,this.y_pos=u-1,v.vertical?d(t,u,1,s):d(t,u,s),this.random_char=!1,this.random_color=!1,Array.isArray(this.character)&&(this.random_char=!0),Array.isArray(this.styling)&&(this.random_color=!0)}).apply(this),function(){var B=this;if(!1===v.vertical){var C=f[this.y_pos].splice(this.x_pos,this.char_count-1);f[this.y_pos][this.x_pos]=[].concat(_toConsumableArray(Array(this.char_count))).map(function(G,H){var I=B.character,J=B.styling;//if character is an array, choose a char from the array.
//special blank character, does not replace existing character on canvas.
return B.random_char&&(I=B.character[Math.floor(Math.random()*B.character.length)]),B.random_color&&(J=B.styling[Math.floor(Math.random()*B.styling.length)]),"_BLANK_"==I?C[H]||f[B.y_pos][B.x_pos]:e(I,J);//return pack(character, styling)
}),f[this.y_pos]=[].concat.apply([],f[this.y_pos])}else for(var D=0;D<this.char_count;D++){var E=this.character,F=this.styling;this.random&&(E=this.character[Math.floor(Math.random()*this.character.length)]),this.random_color&&(F=this.styling[Math.floor(Math.random()*this.styling.length)]),f[this.y_pos+D][this.x_pos]=e(E,F)}}.apply(this)}};//Master functions
//Public API
return{line:n,square:{character:"@",square_width:4,square_height:4,styling:"color:black;",x_pos:0,y_pos:0,draw:function draw(){var r=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"@",s=1<arguments.length&&arguments[1]!==void 0?arguments[1]:4,t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:4,u=3<arguments.length&&arguments[3]!==void 0?arguments[3]:1,v=4<arguments.length&&arguments[4]!==void 0?arguments[4]:1,A=5<arguments.length&&arguments[5]!==void 0?arguments[5]:{styling:"color:black;"};//DRAW - character, width, height, y_position, x_position
(function(){this.character=r,this.styling=A.styling||"color:black;",this.square_width=s,this.square_height=t,d(u,v,s,t),this.x_pos=u,this.y_pos=v}).apply(this),function(){for(var C=0;C<this.square_height;C++)n.draw(this.character,this.square_width,this.x_pos,this.y_pos+C,{styling:this.styling})}.apply(this)}},text:{characters:"",styling:"color:black;",x_pos:0,y_pos:0,draw:function draw(){var r=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",s=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1,t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:1,u=3<arguments.length&&arguments[3]!==void 0?arguments[3]:{styling:"color:black;"};//DRAW characters in text, x_position, y position
(function(){this.characters=r,this.styling=u.styling||"color:black;",this.x_pos=s-1,this.y_pos=t-1}).apply(this),function(){var A=this;f[this.y_pos].splice(this.x_pos,this.characters.length-1),f[this.y_pos][this.x_pos]=this.characters.split("").map(function(B){return e(B,A.styling)}),f[this.y_pos]=[].concat.apply([],f[this.y_pos])}.apply(this)}},point:{character:"@",styling:"color:black;",x_pos:0,y_pos:0,draw:function draw(){var r=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"@",s=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1,t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:1,u=3<arguments.length&&arguments[3]!==void 0?arguments[3]:{styling:"color:black;"};//DRAW character, x_position, y_position
(function(){this.character=r,this.styling=u.styling||"color:black;",this.x_pos=s-1,this.y_pos=t-1}).apply(this),function(){f[this.y_pos][this.x_pos]=e(this.character,this.styling)}.apply(this)}},createCanvas:function createCanvas(r,s){g=r,k=s,f=[].concat(_toConsumableArray(Array(k))).map(function(){return[].concat(_toConsumableArray(Array(g))).map(function(){return e(" ","color:black;")})})},expandCanvas:function expandCanvas(r,s){var t=f.length,u=f.map(function(A){return A.concat([].concat(_toConsumableArray(Array(r-A.length))).map(function(){return e(" ","color:black;")}))});for(var v=0;v<s-t;v++)u.push([].concat(_toConsumableArray(Array(r))).map(function(){return e(" ","color:black;")}));g=r,k=s,f=u},shrinkCanvas:function shrinkCanvas(r,s){var t=f.slice(0,r).map(function(u){return u.slice(0,s)});g=r,k=s,f=t},drawCanvas:function drawCanvas(){return f.map(function(r){return r.join("")}).join(" \n")},getContent:b,logCanvas:function logCanvas(){var r=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{display_color:!0},s=f.map(function(v,A){return v.map(function(B,C){return b(C+1,A+1)})});//remove span tags from all characters.
if(!0===r.display_color){var t,u=[].concat.apply([],s.map(function(v){return v.map(function(A){return A.styling})}));(t=console).log.apply(t,[s.map(function(v){return v.map(function(A){return"%c"+A.text}).join("")}).join(" \n")].concat(_toConsumableArray(u)))}else console.log(s.map(function(v){return v.map(function(A){return A.text}).join("")}).join(" \n"))}}},macro:{init:function init(){var b=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{functions:[]},d=b.functions||[],e="";return{make:function make(){var g=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{canvas:""};e=g.canvas||"",d.map(function(k){"line"==k.type?e.line.draw(k.c,k.l,k.y,k.x,k.extras):"square"==k.type?e.square.draw(k.c,k.w,k.h,k.y,k.x,k.extras):("text"==k.type||"point"==k.type)&&e.text.draw(k.text||k.c,k.x,k.y,k.extras)})},getinfo:function getinfo(){console.log("functions: "+d,"canvas: "+JSON.stringify(e))}}}}};module.exports = TextDraw;